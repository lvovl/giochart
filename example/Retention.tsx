import * as React from "react";
import { DrawParamsProps, Source} from "../src/ChartProps";
import Chart from "../src/Chart";
import { retentionSourceSelector } from "../src/utils";

const s = JSON.parse('{"adjust":"stack","timeRange":"day:15,1","granularities":[{"id":"tm","interval":"86400000"},{"id":"region","values":["_all_","上海","四川","浙江","江苏"]}],"attrs":{"selection":[0,1,2,3,4]},"chartType":"retention","columns":[{"id":"turn","name":"留存","isDim":true,"isRate":false,"values":["当天","1天后","2天后","3天后","4天后","5天后","6天后","7天后","8天后","9天后","10天后","11天后","12天后","13天后"]},{"id":"region","name":"地区","isDim":true,"isRate":false},{"id":"comparison_value","name":"对比值","isDim":true,"isRate":false},{"id":"retention_rate","name":"留存率","isDim":false,"isRate":true},{"id":"retention","name":"留存人数","isDim":false,"isRate":false}]}');

const p = JSON.parse('[{"retention":67365,"retention_rate":1,"comparison_value":"_all_","region":"全部","turn":0},{"retention":12183,"retention_rate":0.20122555496828753,"comparison_value":"_all_","region":"全部","turn":1},{"retention":7396,"retention_rate":0.1349093429645033,"comparison_value":"_all_","region":"全部","turn":2},{"retention":6871,"retention_rate":0.12908862043699626,"comparison_value":"_all_","region":"全部","turn":3},{"retention":7239,"retention_rate":0.14094077333437172,"comparison_value":"_all_","region":"全部","turn":4},{"retention":6758,"retention_rate":0.14720745839505098,"comparison_value":"_all_","region":"全部","turn":5},{"retention":5977,"retention_rate":0.14879633548258608,"comparison_value":"_all_","region":"全部","turn":6},{"retention":5689,"retention_rate":0.16522421003717472,"comparison_value":"_all_","region":"全部","turn":7},{"retention":3586,"retention_rate":0.12616542940576295,"comparison_value":"_all_","region":"全部","turn":8},{"retention":1774,"retention_rate":0.08116392917600769,"comparison_value":"_all_","region":"全部","turn":9},{"retention":1653,"retention_rate":0.0819777821860742,"comparison_value":"_all_","region":"全部","turn":10},{"retention":2135,"retention_rate":0.1182825484764543,"comparison_value":"_all_","region":"全部","turn":11},{"retention":1978,"retention_rate":0.16476468138275718,"comparison_value":"_all_","region":"全部","turn":12},{"retention":944,"retention_rate":0.16423103688239388,"comparison_value":"_all_","region":"全部","turn":13},{"retention":10037,"retention_rate":1,"comparison_value":"上海","region":"上海","turn":0},{"retention":2244,"retention_rate":0.2521915037086986,"comparison_value":"上海","region":"上海","turn":1},{"retention":1336,"retention_rate":0.16781811330234894,"comparison_value":"上海","region":"上海","turn":2},{"retention":1272,"retention_rate":0.16318152661962795,"comparison_value":"上海","region":"上海","turn":3},{"retention":1368,"retention_rate":0.17971623751970572,"comparison_value":"上海","region":"上海","turn":4},{"retention":1243,"retention_rate":0.18341449018739855,"comparison_value":"上海","region":"上海","turn":5},{"retention":1122,"retention_rate":0.19341492846061023,"comparison_value":"上海","region":"上海","turn":6},{"retention":1080,"retention_rate":0.2188006482982172,"comparison_value":"上海","region":"上海","turn":7},{"retention":662,"retention_rate":0.1662898769153479,"comparison_value":"上海","region":"上海","turn":8},{"retention":321,"retention_rate":0.10840932117527863,"comparison_value":"上海","region":"上海","turn":9},{"retention":292,"retention_rate":0.10343606092809068,"comparison_value":"上海","region":"上海","turn":10},{"retention":410,"retention_rate":0.15595283377710156,"comparison_value":"上海","region":"上海","turn":11},{"retention":364,"retention_rate":0.21052631578947367,"comparison_value":"上海","region":"上海","turn":12},{"retention":173,"retention_rate":0.21331689272503082,"comparison_value":"上海","region":"上海","turn":13},{"retention":2574,"retention_rate":1,"comparison_value":"四川","region":"四川","turn":0},{"retention":579,"retention_rate":0.24881822088525998,"comparison_value":"四川","region":"四川","turn":1},{"retention":359,"retention_rate":0.1672100605496041,"comparison_value":"四川","region":"四川","turn":2},{"retention":321,"retention_rate":0.15329512893982808,"comparison_value":"四川","region":"四川","turn":3},{"retention":353,"retention_rate":0.17295443410093092,"comparison_value":"四川","region":"四川","turn":4},{"retention":324,"retention_rate":0.17685589519650655,"comparison_value":"四川","region":"四川","turn":5},{"retention":274,"retention_rate":0.17374762206721622,"comparison_value":"四川","region":"四川","turn":6},{"retention":276,"retention_rate":0.20429311621021465,"comparison_value":"四川","region":"四川","turn":7},{"retention":165,"retention_rate":0.14959202175883954,"comparison_value":"四川","region":"四川","turn":8},{"retention":84,"retention_rate":0.09905660377358491,"comparison_value":"四川","region":"四川","turn":9},{"retention":75,"retention_rate":0.09236453201970443,"comparison_value":"四川","region":"四川","turn":10},{"retention":83,"retention_rate":0.10978835978835978,"comparison_value":"四川","region":"四川","turn":11},{"retention":89,"retention_rate":0.16888045540796964,"comparison_value":"四川","region":"四川","turn":12},{"retention":41,"retention_rate":0.1943127962085308,"comparison_value":"四川","region":"四川","turn":13},{"retention":10420,"retention_rate":1,"comparison_value":"浙江","region":"浙江","turn":0},{"retention":1721,"retention_rate":0.17899115964638584,"comparison_value":"浙江","region":"浙江","turn":1},{"retention":1064,"retention_rate":0.12197638427146625,"comparison_value":"浙江","region":"浙江","turn":2},{"retention":964,"retention_rate":0.11540763797438046,"comparison_value":"浙江","region":"浙江","turn":3},{"retention":1038,"retention_rate":0.1303692539562924,"comparison_value":"浙江","region":"浙江","turn":4},{"retention":962,"retention_rate":0.13375973303670746,"comparison_value":"浙江","region":"浙江","turn":5},{"retention":854,"retention_rate":0.13223908330752554,"comparison_value":"浙江","region":"浙江","turn":6},{"retention":834,"retention_rate":0.14892857142857144,"comparison_value":"浙江","region":"浙江","turn":7},{"retention":544,"retention_rate":0.11552346570397112,"comparison_value":"浙江","region":"浙江","turn":8},{"retention":280,"retention_rate":0.07429026266914301,"comparison_value":"浙江","region":"浙江","turn":9},{"retention":230,"retention_rate":0.07025045815516189,"comparison_value":"浙江","region":"浙江","turn":10},{"retention":309,"retention_rate":0.11008193801211258,"comparison_value":"浙江","region":"浙江","turn":11},{"retention":301,"retention_rate":0.1566892243623113,"comparison_value":"浙江","region":"浙江","turn":12},{"retention":139,"retention_rate":0.14554973821989528,"comparison_value":"浙江","region":"浙江","turn":13},{"retention":1897,"retention_rate":1,"comparison_value":"江苏","region":"江苏","turn":0},{"retention":237,"retention_rate":0.13683602771362588,"comparison_value":"江苏","region":"江苏","turn":1},{"retention":122,"retention_rate":0.07682619647355164,"comparison_value":"江苏","region":"江苏","turn":2},{"retention":120,"retention_rate":0.07751937984496124,"comparison_value":"江苏","region":"江苏","turn":3},{"retention":110,"retention_rate":0.07372654155495978,"comparison_value":"江苏","region":"江苏","turn":4},{"retention":113,"retention_rate":0.08407738095238096,"comparison_value":"江苏","region":"江苏","turn":5},{"retention":89,"retention_rate":0.07632933104631218,"comparison_value":"江苏","region":"江苏","turn":6},{"retention":72,"retention_rate":0.0702439024390244,"comparison_value":"江苏","region":"江苏","turn":7},{"retention":65,"retention_rate":0.07531865585168018,"comparison_value":"江苏","region":"江苏","turn":8},{"retention":36,"retention_rate":0.05325443786982249,"comparison_value":"江苏","region":"江苏","turn":9},{"retention":28,"retention_rate":0.04560260586319218,"comparison_value":"江苏","region":"江苏","turn":10},{"retention":32,"retention_rate":0.06060606060606061,"comparison_value":"江苏","region":"江苏","turn":11},{"retention":24,"retention_rate":0.06382978723404255,"comparison_value":"江苏","region":"江苏","turn":12},{"retention":18,"retention_rate":0.10650887573964497,"comparison_value":"江苏","region":"江苏","turn":13}]');

const s1 = JSON.parse('{"adjust":"stack","timeRange":"day:15,1","granularities":[{"id":"tm","interval":"86400000"}],"attrs":{"selection":[]},"chartType":"retention","columns":[{"id":"tm","name":"起始时间","isDim":true,"isRate":false},{"id":"turn","name":"留存周期","isDim":true,"isRate":false,"values":["1天后留存率","7天后留存率"]},{"id":"retention_rate","name":"留存率","isDim":false,"isRate":true},{"id":"retention","name":"留存人数","isDim":false,"isRate":false}]}');

const p1 = JSON.parse('[{"tm":1504713600000,"turn":"1","retention":1523,"retention_rate":0.24340738373022214},{"tm":1504800000000,"turn":"1","retention":421,"retention_rate":0.06964433416046319},{"tm":1504886400000,"turn":"1","retention":184,"retention_rate":0.08703878902554399},{"tm":1504972800000,"turn":"1","retention":266,"retention_rate":0.15711754282339044},{"tm":1505059200000,"turn":"1","retention":1549,"retention_rate":0.23591227535790435},{"tm":1505145600000,"turn":"1","retention":1488,"retention_rate":0.2476285571642536},{"tm":1505232000000,"turn":"1","retention":1487,"retention_rate":0.25919470106327347},{"tm":1505318400000,"turn":"1","retention":1470,"retention_rate":0.25614218504966024},{"tm":1505404800000,"turn":"1","retention":312,"retention_rate":0.05720572057205721},{"tm":1505491200000,"turn":"1","retention":160,"retention_rate":0.08579088471849866},{"tm":1505577600000,"turn":"1","retention":264,"retention_rate":0.16551724137931034},{"tm":1505664000000,"turn":"1","retention":1537,"retention_rate":0.2686123732960503},{"tm":1505750400000,"turn":"1","retention":1646,"retention_rate":0.24131359038264183},{"tm":1504713600000,"turn":"7","retention":1058,"retention_rate":0.16909061850727186},{"tm":1504800000000,"turn":"7","retention":991,"retention_rate":0.16393713813068653},{"tm":1504886400000,"turn":"7","retention":146,"retention_rate":0.06906338694418164},{"tm":1504972800000,"turn":"7","retention":139,"retention_rate":0.08210277613703484},{"tm":1505059200000,"turn":"7","retention":1202,"retention_rate":0.18306427048431312},{"tm":1505145600000,"turn":"7","retention":1090,"retention_rate":0.18139457480445997},{"tm":1505232000000,"turn":"7","retention":1094,"retention_rate":0.19069199930277148}]');

const s2 = JSON.parse('{"adjust":"stack","timeRange":"day:15,1","granularities":[{"id":"tm","interval":"86400000"}],"attrs":{"selection":[]},"chartType":"retention","columns":[{"id":"turn","name":"留存","isDim":true,"isRate":false,"values":["当天","1天后","2天后","3天后","4天后","5天后","6天后","7天后","8天后","9天后","10天后","11天后","12天后","13天后"]},{"id":"retention_rate","name":"留存率","isDim":false,"isRate":true},{"id":"retention","name":"留存人数","isDim":false,"isRate":false}]}');

const p2 = JSON.parse('[{"retention":68294,"retention_rate":1,"turn":0},{"retention":12307,"retention_rate":0.19973383968709935,"turn":1},{"retention":7497,"retention_rate":0.13681655595298928,"turn":2},{"retention":6778,"retention_rate":0.13811794432897256,"turn":3},{"retention":7250,"retention_rate":0.15269908801786053,"turn":4},{"retention":6642,"retention_rate":0.14561318893322225,"turn":5},{"retention":6018,"retention_rate":0.14985059760956176,"turn":6},{"retention":5720,"retention_rate":0.16617762412480752,"turn":7},{"retention":3612,"retention_rate":0.12592385999163297,"turn":8},{"retention":1870,"retention_rate":0.0824696802646086,"turn":9},{"retention":1652,"retention_rate":0.10255136880004966,"turn":10},{"retention":2219,"retention_rate":0.15392619311875694,"turn":11},{"retention":1901,"retention_rate":0.1545277190700699,"turn":12},{"retention":975,"retention_rate":0.15582547546747644,"turn":13}]');

const g = JSON.parse('{"adjust":"stack","timeRange":"day:15,1","granularities":[{"id":"tm","interval":"604800000"},{"id":"city","values":["_all_","杭州"]}],"attrs":{"selection":[0,1]},"chartType":"retention","columns":[{"id":"tm","name":"起始时间","isDim":true,"isRate":false},{"id":"city","name":"城市","isDim":true,"isRate":false},{"id":"comparison_value","name":"对比值","isDim":true,"isRate":false},{"id":"retention_rate","name":"2周后留存率","isDim":false,"isRate":true},{"id":"retention","name":"留存人数","isDim":false,"isRate":false}]}');
const g1 = JSON.parse('[{"comparison_value":"_all_","city":"全部","tm":1504713600000,"turn":"2","retention":2046,"retention_rate":0.14921236872812135},{"comparison_value":"杭州","city":"杭州","tm":1504713600000,"turn":"2","retention":297,"retention_rate":0.12579415501905972}]');
const g2 = 1505997604513;
const g3 = JSON.parse('{"channel_name":"retention","board_name":"new"}');

const x = JSON.parse('{"adjust":"stack","timeRange":"day:15,1","granularities":[{"id":"tm","interval":"86400000"},{"id":"city","values":["_all_","杭州"]}],"attrs":{"selection":[0,1]},"chartType":"retention","columns":[{"id":"tm","name":"起始时间","isDim":true,"isRate":false},{"id":"city","name":"城市","isDim":true,"isRate":false},{"id":"comparison_value","name":"对比值","isDim":true,"isRate":false},{"id":"retention_rate","name":"7天后留存率","isDim":false,"isRate":true},{"id":"retention","name":"留存人数","isDim":false,"isRate":false}]}');
const xx = JSON.parse('[{"comparison_value":"_all_","city":"全部","tm":1504713600000,"turn":"7","retention":1058,"retention_rate":0.16909061850727186},{"comparison_value":"_all_","city":"全部","tm":1504800000000,"turn":"7","retention":991,"retention_rate":0.16393713813068653},{"comparison_value":"_all_","city":"全部","tm":1504886400000,"turn":"7","retention":146,"retention_rate":0.06906338694418164},{"comparison_value":"_all_","city":"全部","tm":1504972800000,"turn":"7","retention":139,"retention_rate":0.08210277613703484},{"comparison_value":"_all_","city":"全部","tm":1505059200000,"turn":"7","retention":1202,"retention_rate":0.18306427048431312},{"comparison_value":"_all_","city":"全部","tm":1505145600000,"turn":"7","retention":1090,"retention_rate":0.18139457480445997},{"comparison_value":"_all_","city":"全部","tm":1505232000000,"turn":"7","retention":1094,"retention_rate":0.19069199930277148},{"comparison_value":"杭州","city":"杭州","tm":1504713600000,"turn":"7","retention":153,"retention_rate":0.1685022026431718},{"comparison_value":"杭州","city":"杭州","tm":1504800000000,"turn":"7","retention":137,"retention_rate":0.16646415552855406},{"comparison_value":"杭州","city":"杭州","tm":1504886400000,"turn":"7","retention":29,"retention_rate":0.06561085972850679},{"comparison_value":"杭州","city":"杭州","tm":1504972800000,"turn":"7","retention":19,"retention_rate":0.04103671706263499},{"comparison_value":"杭州","city":"杭州","tm":1505059200000,"turn":"7","retention":160,"retention_rate":0.18285714285714286},{"comparison_value":"杭州","city":"杭州","tm":1505145600000,"turn":"7","retention":137,"retention_rate":0.16251482799525505},{"comparison_value":"杭州","city":"杭州","tm":1505232000000,"turn":"7","retention":150,"retention_rate":0.18564356435643564}]');

const Retention = (props: any) => (
  <Chart chartParams={g} source={g1} gridPanel={true} startTime={g2} trackWords={g3} />
);
export default Retention;
